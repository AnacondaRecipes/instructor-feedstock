{% set name = "instructor" %}
{% set version = "1.7.9" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/jxnl/instructor/archive/refs/tags/{{ version }}.tar.gz
  sha256: 1a7a8f80103f0ed3dc7bb60689772e2e21f5e185586107f39022c983fa97204d

build:
  entry_points:
    - instructor = instructor.cli.cli:app
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  skip: true  # [py<310]
  number: 0
# Though it is avaible upstream for 3.9, we’ll limit the package to Python 3.10 and above,
# since the newer typing syntax breaks all 3.9 builds.

requirements:
  host:
    - python
    - poetry-core
    - hatchling
    - pip
  run:
    - python
    - openai >=1.52.0,<2.0.0
    - pydantic >=2.8.0,<3.0.0
    - docstring_parser >=0.16.0,<0.17.0
    - typer >=0.9.0,<1.0.0
    - rich >=13.7.0,<14.0.0
    - aiohttp >=3.9.1,<4.0.0
    - requests >=2.32.3
    - tenacity >=9.0.0,<10.0.0
    - pydantic-core >=2.18.0,<3.0.0
    - jiter >=0.6.1,<0.7
    - jinja2 >=3.1.4
  run_constrained:
    - fastapi >=0.109.2,<0.110.0
    - redis-py >=5.0.1,<6.0.0
    - diskcache >=5.6.3,<6.0.0
    - pandas >=2.2.0,<3.0.0
    - tabulate >=0.9.0,<0.10.0
    - pydantic_extra_types >=2.6.0,<3.0.0
    - litellm >=1.0.0,<2.0.0
    - anthropic >=0.23.1,<0.24.0
    - xmltodict >=0.13.0,<0.14.0
    - groq >=0.4.2,<0.5.0
    - cohere >=5.1.8,<6.0.0
    - mistralai >=0.1.8,<0.2.0

test:
  imports:
    - instructor
  commands:
    - pip check
  requires:
    - python
    - pip

about:
  home: https://github.com/jxnl/instructor
  summary: structured outputs for llm
  license: MIT
  license_file: LICENSE
  description : |
    Instructor is a Python library that provides a simple and efficient way to
    create structured outputs for large language models (LLMs). It allows you to
    define the structure of the output you want from the LLM, making it easier to
    work with the generated text. The library is designed to be easy to use and
    integrate into your existing projects.
  dev_url: https://github.com/jxnl/instructor
  doc_url: https://github.com/jxnl/instructor

extra:
  recipe-maintainers:
    - moritzwilksch
